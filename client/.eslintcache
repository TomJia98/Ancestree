[{"C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\index.js":"1","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\reportWebVitals.js":"2","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\App.js":"3","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\components\\Header\\index.js":"4","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\components\\Footer\\index.js":"5","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\utils\\queries.js":"6","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\utils\\auth.js":"7","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\utils\\mutations.js":"8","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\pages\\Landing.js":"9","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\pages\\Signup.js":"10","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\pages\\Login.js":"11","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\pages\\Main.js":"12","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\components\\SinglePersonInfo.js":"13","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\components\\addChild.js":"14","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\components\\selectMenu.js":"15"},{"size":620,"mtime":1653277234556,"results":"16","hashOfConfig":"17"},{"size":375,"mtime":1652767040395,"results":"18","hashOfConfig":"17"},{"size":1612,"mtime":1653027433539,"results":"19","hashOfConfig":"17"},{"size":0,"mtime":1652956480117,"results":"20","hashOfConfig":"17"},{"size":0,"mtime":1652956481053,"results":"21","hashOfConfig":"17"},{"size":762,"mtime":1653308910149,"results":"22","hashOfConfig":"17"},{"size":757,"mtime":1652767040396,"results":"23","hashOfConfig":"17"},{"size":2015,"mtime":1653389609249,"results":"24","hashOfConfig":"17"},{"size":562,"mtime":1653109601893,"results":"25","hashOfConfig":"17"},{"size":2446,"mtime":1653279536934,"results":"26","hashOfConfig":"17"},{"size":1743,"mtime":1652961911596,"results":"27","hashOfConfig":"17"},{"size":4533,"mtime":1653388934135,"results":"28","hashOfConfig":"17"},{"size":1630,"mtime":1653389059813,"results":"29","hashOfConfig":"17"},{"size":7810,"mtime":1653392726362,"results":"30","hashOfConfig":"17"},{"size":852,"mtime":1653310458932,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"m7pba6",{"filePath":"35","messages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"37","messages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"34"},{"filePath":"40","messages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"42","messages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"46","messages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"48","messages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52","usedDeprecatedRules":"34"},{"filePath":"53","messages":"54","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"55","messages":"56","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"57","usedDeprecatedRules":"34"},{"filePath":"58","messages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60","usedDeprecatedRules":"34"},{"filePath":"61","messages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"34"},{"filePath":"64","messages":"65","errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"66"},{"filePath":"67","messages":"68","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\index.js",[],["69","70"],"C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\reportWebVitals.js",[],"C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\App.js",["71","72"],"import React from \"react\";\r\nimport {\r\n  ApolloClient,\r\n  InMemoryCache,\r\n  ApolloProvider,\r\n  createHttpLink,\r\n} from \"@apollo/client\";\r\nimport { setContext } from \"@apollo/client/link/context\";\r\nimport { BrowserRouter as Router, Routes, Route } from \"react-router-dom\";\r\n\r\nimport Header from \"./components/Header\";\r\nimport Footer from \"./components/Footer\";\r\nimport Landing from \"./pages/Landing\";\r\nimport Signup from \"./pages/Signup\";\r\nimport Login from \"./pages/Login\";\r\nimport Main from \"./pages/Main\";\r\n\r\n\r\nconst httpLink = createHttpLink({\r\n  uri: \"/graphql\",\r\n});\r\n\r\nconst authLink = setContext((_, { headers }) => {\r\n  // get the authentication token from local storage if it exists\r\n  const token = localStorage.getItem(\"id_token\");\r\n  // return the headers to the context so httpLink can read them\r\n  return {\r\n    headers: {\r\n      ...headers,\r\n      authorization: token ? `Bearer ${token}` : \"\",\r\n    },\r\n  };\r\n});\r\n\r\nconst client = new ApolloClient({\r\n  link: authLink.concat(httpLink),\r\n  cache: new InMemoryCache(),\r\n});\r\n\r\nfunction App() {\r\n  return (\r\n    <ApolloProvider client={client}>\r\n      <Router>\r\n        <div>\r\n          {/* <Header /> */}\r\n          <div>\r\n          \r\n            <Routes>\r\n              <Route path=\"/\" element={<Landing />} />\r\n              <Route path=\"/signup\" element={<Signup />} />\r\n              <Route path=\"/login\" element={<Login />} />\r\n              <Route path=\"/main\" element={<Main />} />\r\n            </Routes>\r\n          </div>\r\n          {/* <Footer /> */}\r\n        </div>\r\n      </Router>\r\n    </ApolloProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\components\\Header\\index.js",[],"C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\components\\Footer\\index.js",[],"C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\utils\\queries.js",[],"C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\utils\\auth.js",[],"C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\utils\\mutations.js",[],"C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\pages\\Landing.js",["73"],"import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport Auth from \"../utils/auth\";\r\n\r\nconst Landing = () => {\r\n  \r\n if(Auth.loggedIn()) console.log(Auth.getProfile())\r\n  return (\r\n    <main>\r\n        { Auth.loggedIn() ? (<><Link to=\"/main\">IsLogged</Link>\r\n        </>):(<>\r\n            <p>IsntLogged</p>\r\n        </>)\r\n\r\n        }\r\n      <h2>Welcome to AncesTree</h2>\r\n      <Link to=\"/login\">Login</Link>\r\n      <Link to=\"/signup\">signup</Link>\r\n    </main>\r\n  )\r\n};\r\n\r\nexport default Landing;\r\n","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\pages\\Signup.js",[],"C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\pages\\Login.js",["74","75","76"],"import React, { useState } from \"react\";\r\n// import { Link } from \"react-router-dom\";\r\n// import { useQuery } from \"@apollo/client\";\r\n import { LOGIN_USER } from \"../utils/mutations\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport Auth from \"../utils/auth\";\r\n\r\nconst Login = (props) => {\r\n    let isLogged = Auth.loggedIn()\r\n    \r\n  const [formState, setFormState] = useState({ email: \"\", password: \"\" });\r\n  const [login, { error, data }] = useMutation( LOGIN_USER );\r\n\r\n  const handleChange = (event) => {\r\n    const { name, value } = event.target;\r\n\r\n    setFormState({\r\n      ...formState,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleFormSubmit = async (event) => {\r\n    event.preventDefault();\r\n    console.log(formState);\r\n    try {\r\n      const { data } = await login({\r\n        variables: { ...formState },\r\n      });\r\n\r\n      Auth.login(data.login.token);\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    setFormState({\r\n      email: \"\",\r\n      password: \"\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <main>\r\n      <h2>Login</h2>\r\n      <form onSubmit={handleFormSubmit}>\r\n        <input\r\n          className=\"form-input\"\r\n          placeholder=\"Your email\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          value={formState.email}\r\n          onChange={handleChange}\r\n        />\r\n        <input\r\n          className=\"form-input\"\r\n          placeholder=\"******\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          value={formState.password}\r\n          onChange={handleChange}\r\n        />\r\n        <button\r\n         \r\n          style={{ cursor: \"pointer\" }}\r\n          type=\"submit\"\r\n        >\r\n          Submit\r\n        </button>\r\n      </form>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\pages\\Main.js",["77","78","79"],"import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { QUERY_SINGLE_PERSON, QUERY_PERSONS } from \"../utils/queries\";\r\nimport Graph from \"react-graph-vis\";\r\nimport Auth from \"../utils/auth\";\r\nimport SinglePersonInfo from \"../components/SinglePersonInfo\";\r\n\r\n// old data from the graph for reference\r\n\r\n// nodes: [\r\n//   { id: \"parent 1\", label: \"parent 1\", title: \"node 1 tootip text\" , level: 1},\r\n//   //to add a new line, use \\n. size of nodes adapts to the change in text\r\n//   { id: 2, label: \"parent 2\", title: \"node 2 tootip text\", level: 1},\r\n//   { id: \"child 2\", label: \"child 2\", title: \"node 4 tootip text\", level: 2},\r\n//   { id: 3, label: \"child 1\", title: \"node 3 tootip text\", level: 2},\r\n//   { id: 5, label: \"child 3\", title: \"node 4 tootip text\", level: 2},\r\n//   { id: 6, label: \"parent 3\", title: \"node 4 tootip text\", level: 1},\r\n//   { id: 7, label: \"granchild 1\", title: \"node 4 tootip text\", level: 3},\r\n//   // { id: 5, label: \"Node 5\", title: \"node 5 tootip text\" }\r\n// ],\r\n// edges: [\r\n//   { from: \"parent 1\", to: 3 },\r\n//   { from: \"parent 1\", to: \"child 2\" },\r\n//   { from: 2, to: \"child 2\" },\r\n//   { from: 2, to: 3 },\r\n//   { from: 6, to: 5 },\r\n//   { from: 5, to: 7 },\r\n//   { from: 3, to: 7 },\r\n//   // { from: 2, to: 5 }\r\n// ]\r\n\r\nlet LEVEL = 0;\r\nconst Main = () => {\r\n  const user = Auth.getProfile();\r\n\r\n  const [isGraphFinished, setIsGraph] = useState(false);\r\n\r\n  const personId = user.data.person;\r\n\r\n  const { loading: allLoading, data: allData } = useQuery(QUERY_PERSONS);\r\n\r\n  if (allData) {\r\n    console.log(allData);\r\n    console.log(\"all data is above this one\");\r\n  }\r\n  const { loading, data: userData } = useQuery(QUERY_SINGLE_PERSON, {\r\n    variables: { personId },\r\n  });\r\n\r\n  let [graphKey, setGraphKey] = useState(uuidv4);\r\n\r\n  let [graph, setGraph] = useState({\r\n    nodes: [],\r\n    edges: [],\r\n  });\r\n\r\n  if (userData && LEVEL === 0) {\r\n    console.log(LEVEL);\r\n    LEVEL++;\r\n    const currentPerson = userData.person;\r\n    console.log(currentPerson);\r\n    console.log(\"here is the user data from the main page\");\r\n\r\n    let currentGraph = graph;\r\n\r\n    let userNode = {\r\n      id: currentPerson._id,\r\n      label: currentPerson.name,\r\n      level: LEVEL,\r\n    };\r\n\r\n    currentGraph.nodes.push(userNode);\r\n    console.log(currentGraph);\r\n    console.log(\"======================\");\r\n    setGraph(currentGraph);\r\n    setIsGraph(true);\r\n  }\r\n\r\n  //add logic for adding new people to the graph\r\n\r\n  /* need to add a search function to return all people that dont have parents (starts of the familylines)\r\nthen loops through the returned array of people and adds their nodes to the graph\r\nthen searches if they have children\r\nif they do, add an edge to each child, and add it to the graph, whilst checking if the*/\r\n\r\n  const [selectedNode, setSelectedNode] = useState(\"\"); //add the logged in users person here as default\r\n\r\n  // const user = Auth.getProfile();\r\n  // const {loading, data} = useQuery(\r\n\r\n  // )\r\n\r\n  //ideas for how to graph out the data\r\n  //need to go to the first parent,(parents==0) then search for children in a loop. for each child layer searched, increase the level by 1\r\n\r\n  const options = {\r\n    layout: {\r\n      hierarchical: false,\r\n    },\r\n    edges: {\r\n      color: \"#000000\",\r\n    },\r\n    height: \"500px\",\r\n  };\r\n\r\n  const events = {\r\n    select: function (event) {\r\n      var { nodes, edges } = event;\r\n      console.log(nodes[0]);\r\n      console.log(edges);\r\n      setSelectedNode(nodes[0]);\r\n    },\r\n  };\r\n\r\n  return (\r\n    <main>\r\n      {Auth.loggedIn() ? (\r\n        <>\r\n          <SinglePersonInfo current={selectedNode} />\r\n          {isGraphFinished ? (\r\n            <>\r\n              <Graph\r\n                key={graphKey}\r\n                graph={graph}\r\n                options={options}\r\n                events={events}\r\n                getNetwork={(network) => {\r\n                  //  if you want access to vis.js network api you can set the state in a parent component using this property\r\n                }}\r\n              />\r\n            </>\r\n          ) : (\r\n            <>\r\n              <p>family tree is being rendered</p>\r\n            </>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <>\r\n          <p>\r\n            It looks like you are not logged in! please log in or signup\r\n            <Link to=\"/login\">here</Link>\r\n          </p>\r\n        </>\r\n      )}\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\components\\SinglePersonInfo.js",["80"],"import React, { useState } from \"react\";\r\nimport { QUERY_SINGLE_PERSON, QUERY_PERSONS_NAME_ID } from \"../utils/queries\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport Auth from \"../utils/auth\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AddChild from \"./addChild\";\r\nconst SinglePersonInfo = (props) => {\r\n  let [ISADDCHILD, setISADDCHILD] = useState(false);\r\n\r\n  const { loading: NIDLoading, data: NIDData } = useQuery(\r\n    QUERY_PERSONS_NAME_ID\r\n  );\r\n  if (!NIDLoading) {\r\n    console.log(NIDData);\r\n  }\r\n  // TODO: pass through the people with id and name into the addChild element\r\n  const user = Auth.getProfile();\r\n  const personId = user.data.person;\r\n  const { loading, data } = useQuery(QUERY_SINGLE_PERSON, {\r\n    variables: { personId: props.current || personId },\r\n  });\r\n  const addChildShow = () => {\r\n    if (ISADDCHILD) {\r\n      setISADDCHILD(false);\r\n    } else setISADDCHILD(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {loading ? (\r\n        <>\r\n          <p>loading...</p>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <p>name :{data.person.name}</p>\r\n          <p>birthday: {data.person.birthday}</p>\r\n          <p>children: {data.person.children.length}</p>\r\n          <button onClick={addChildShow}>new child</button>\r\n          {ISADDCHILD ? (\r\n            <>\r\n              <AddChild\r\n                personId={data.person._id}\r\n                addChildHide={addChildShow}\r\n                personsIdAndNameArr={NIDData}\r\n              ></AddChild>\r\n            </>\r\n          ) : (\r\n            <></>\r\n          )}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\nexport default SinglePersonInfo;\r\n","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\components\\addChild.js",["81","82","83","84","85","86","87","88","89","90","91","92"],"import React, { useState, Component, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  QUERY_SINGLE_PERSON,\r\n  QUERY_PERSONS,\r\n  QUERY_PERSONS_NAME_ID,\r\n} from \"../utils/queries\";\r\nimport {\r\n  ADD_PERSON,\r\n  UPDATE_PERSON,\r\n  UPDATE_CHILDREN_AND_PARENTS,\r\n} from \"../utils/mutations\";\r\nimport Auth from \"../utils/auth\";\r\nimport CreatableSelect from \"react-select/creatable\";\r\n//TODO: get the props from singlepersoninfo component and add them to the options for parents names\r\n//with an option for a new person if that selected\r\n//finish the other inputs, need a boolean slider for isClose\r\nconst AddChild = (props) => {\r\n  const [newParentName, setNewParentName] = useState(null);\r\n  const [formState, setFormState] = useState({\r\n    name: \"\",\r\n    deathDate: \"\",\r\n    birthday: \"\",\r\n    parents: [],\r\n    children: [],\r\n    isClose: false,\r\n  });\r\n\r\n  const [selectVal, setSelectVal] = useState(\"\");\r\n\r\n  const { loading: allLoading, data: allData } = useQuery(QUERY_PERSONS);\r\n  const { loading: currentLoading, data: currentData } = useQuery(\r\n    QUERY_SINGLE_PERSON,\r\n    {\r\n      variables: { personId: props.personId },\r\n    }\r\n  );\r\n  const namesAndIds = props.personsIdAndNameArr.persons;\r\n  let options = [];\r\n  namesAndIds.forEach((el) => {\r\n    //add the ids and names of the current people to the options for the drop down\r\n    const obj = { value: el._id, label: el.name };\r\n    options.push(obj);\r\n  });\r\n\r\n  const handleMultiChange = (e) => {\r\n    console.log(e);\r\n    console.log(e.label);\r\n    setSelectVal(e.label);\r\n    console.log(selectVal);\r\n    if (!options.find((x) => x.value === e.value)) {\r\n      console.log(\"parent not found, creating new\");\r\n      console.log(e.value);\r\n      //if the selected name is new\r\n      setNewParentName(e.value);\r\n      console.log(newParentName);\r\n      return;\r\n      //create new person based on the new inputted name, and save them as a parent to the child being added\r\n    }\r\n    setFormState({ ...formState, parents: [e.value, props.personId] });\r\n  };\r\n\r\n  // useEffect(() => { // trying to get the selected person to appear in the select box. currently displaying above\r\n  //   if (selectVal) {\r\n  //     const option = options.find((option) => option.value === selectVal.value);\r\n  //     if (option && option.label !== selectVal.label) {\r\n  //       setSelectVal(option);\r\n  //     }\r\n  //   }\r\n  // }, [formState, options]);\r\n  const [createPerson, { error: addError }] = useMutation(ADD_PERSON);\r\n  const [updatePerson, { error: updateError }] = useMutation(UPDATE_PERSON);\r\n  const [updatePersonRels, { error: updateRelsError }] = useMutation(\r\n    UPDATE_CHILDREN_AND_PARENTS\r\n  );\r\n\r\n  const handleChange = (event) => {\r\n    const { name, value } = event.target;\r\n\r\n    setFormState({\r\n      ...formState,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleFormSubmit = async (event) => {\r\n    event.preventDefault();\r\n    console.log(formState);\r\n    console.log(newParentName);\r\n    try {\r\n      if (newParentName !== null) {\r\n        console.log(newParentName);\r\n        console.log(\"entering the new parent name\");\r\n        const newBlankParent = await createPerson({\r\n          //creating the new parent\r\n          variables: { name: newParentName, isClose: false },\r\n        });\r\n        const NewParentId = newBlankParent.data.addPerson._id;\r\n        console.log(newBlankParent);\r\n        const newParentAndChild = await createPerson({\r\n          //creating the new child and adding the current user and new parent\r\n          variables: {\r\n            name: formState.name,\r\n            deathDate: formState.deathDate,\r\n            birthday: formState.birthday,\r\n            birthday: formState.birthday,\r\n            parents: [NewParentId, props.personId],\r\n            children: [],\r\n            isclose: formState.isClose,\r\n          },\r\n        });\r\n        const newChildId = newParentAndChild.data.addPerson._id;\r\n        await updatePerson({\r\n          //updating the blank parent with the new childs id\r\n          variables: { _ID: NewParentId, children: [newChildId] },\r\n        });\r\n        let currentChildren = currentData.person.children;\r\n        if (currentChildren.length === 0) {\r\n          await updatePerson({\r\n            variables: {\r\n              _ID: props.personId, //updating the current logged in person with new child\r\n              children: [newChildId],\r\n            },\r\n          });\r\n        } else {\r\n          console.log(currentChildren);\r\n          console.log(newChildId);\r\n          let currentChildren2 = [...currentChildren, newChildId];\r\n          console.log(currentChildren2);\r\n\r\n          await updatePerson({\r\n            variables: {\r\n              _ID: props.personId, //updating the current logged in person with new child\r\n              children: currentChildren2,\r\n            },\r\n          });\r\n        }\r\n        setNewParentName(null);\r\n        setFormState({\r\n          name: \"\",\r\n          deathDate: \"\",\r\n          birthday: \"\",\r\n          parents: [],\r\n          children: [],\r\n          isClose: false,\r\n        });\r\n        props.addChildHide(); //close the add child section upon completion\r\n      } //create new parent and new child complete, below need to do for existing parent\r\n      else {\r\n        const newChild = await createPerson({\r\n          variables: { ...formState },\r\n        });\r\n        let newChildActual = newChild.data.addPerson;\r\n        console.log(newChild);\r\n        for (let i = 0; i < newChildActual.parents.length; i++) {\r\n          const parentToAdd = await updatePersonRels({\r\n            variables: {\r\n              _ID: newChildActual.parents[i],\r\n              children: newChildActual._id,\r\n            },\r\n          });\r\n          console.log(parentToAdd);\r\n        }\r\n        setNewParentName(null);\r\n        setFormState({\r\n          name: \"\",\r\n          deathDate: \"\",\r\n          birthday: \"\",\r\n          parents: [],\r\n          children: [],\r\n          isClose: false,\r\n        });\r\n        props.addChildHide();\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleFormSubmit}>\r\n        <label>\r\n          <br></br>\r\n          Childs Name:\r\n          <input\r\n            className=\"form-input\"\r\n            placeholder=\"Childs Name\"\r\n            name=\"name\"\r\n            type=\"text\"\r\n            value={formState.name}\r\n            onChange={handleChange}\r\n          />\r\n        </label>\r\n        <br></br>\r\n        <label>\r\n          Childs Birthdate:\r\n          <input\r\n            className=\"form-input\"\r\n            placeholder=\" birthday\"\r\n            name=\"birthday\"\r\n            type=\"date\"\r\n            value={formState.birthday}\r\n            onChange={handleChange}\r\n          />\r\n        </label>\r\n        <br></br>\r\n        <label>\r\n          Childs deathDate:\r\n          <input\r\n            className=\"form-input\"\r\n            placeholder=\"deathDate\"\r\n            name=\"deathDate\"\r\n            type=\"date\"\r\n            value={formState.deathDate}\r\n            onChange={handleChange}\r\n          />\r\n        </label>\r\n        <br></br>\r\n        <label>\r\n          Other Parent: {selectVal}\r\n          <CreatableSelect\r\n            isMulti={false}\r\n            value={selectVal}\r\n            options={options}\r\n            closeMenuOnSelect={true}\r\n            onChange={handleMultiChange}\r\n          />\r\n        </label>\r\n        <br></br>\r\n        <label>\r\n          Email on birthday\r\n          <input\r\n            className=\"react-switch-checkbox\"\r\n            name=\"isClose\"\r\n            type=\"checkbox\"\r\n          />\r\n        </label>\r\n\r\n        <input type=\"submit\" value=\"Add Child\" />\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddChild;\r\n","C:\\Users\\Pmmmm\\OneDrive\\Desktop\\uwa code\\project 3\\Ancestree\\Ancestree\\client\\src\\components\\selectMenu.js",["93","94","95","96"],{"ruleId":"97","replacedBy":"98"},{"ruleId":"99","replacedBy":"100"},{"ruleId":"101","severity":1,"message":"102","line":11,"column":8,"nodeType":"103","messageId":"104","endLine":11,"endColumn":14},{"ruleId":"101","severity":1,"message":"105","line":12,"column":8,"nodeType":"103","messageId":"104","endLine":12,"endColumn":14},{"ruleId":"101","severity":1,"message":"106","line":3,"column":10,"nodeType":"103","messageId":"104","endLine":3,"endColumn":18},{"ruleId":"101","severity":1,"message":"107","line":9,"column":9,"nodeType":"103","messageId":"104","endLine":9,"endColumn":17},{"ruleId":"101","severity":1,"message":"108","line":12,"column":19,"nodeType":"103","messageId":"104","endLine":12,"endColumn":24},{"ruleId":"101","severity":1,"message":"109","line":12,"column":26,"nodeType":"103","messageId":"104","endLine":12,"endColumn":30},{"ruleId":"101","severity":1,"message":"110","line":42,"column":20,"nodeType":"103","messageId":"104","endLine":42,"endColumn":30},{"ruleId":"101","severity":1,"message":"111","line":48,"column":11,"nodeType":"103","messageId":"104","endLine":48,"endColumn":18},{"ruleId":"101","severity":1,"message":"112","line":52,"column":18,"nodeType":"103","messageId":"104","endLine":52,"endColumn":29},{"ruleId":"101","severity":1,"message":"113","line":5,"column":10,"nodeType":"103","messageId":"104","endLine":5,"endColumn":14},{"ruleId":"101","severity":1,"message":"114","line":1,"column":27,"nodeType":"103","messageId":"104","endLine":1,"endColumn":36},{"ruleId":"101","severity":1,"message":"115","line":1,"column":38,"nodeType":"103","messageId":"104","endLine":1,"endColumn":47},{"ruleId":"101","severity":1,"message":"113","line":2,"column":10,"nodeType":"103","messageId":"104","endLine":2,"endColumn":14},{"ruleId":"101","severity":1,"message":"116","line":7,"column":3,"nodeType":"103","messageId":"104","endLine":7,"endColumn":24},{"ruleId":"101","severity":1,"message":"117","line":14,"column":8,"nodeType":"103","messageId":"104","endLine":14,"endColumn":12},{"ruleId":"101","severity":1,"message":"110","line":32,"column":20,"nodeType":"103","messageId":"104","endLine":32,"endColumn":30},{"ruleId":"101","severity":1,"message":"118","line":32,"column":38,"nodeType":"103","messageId":"104","endLine":32,"endColumn":45},{"ruleId":"101","severity":1,"message":"119","line":33,"column":20,"nodeType":"103","messageId":"104","endLine":33,"endColumn":34},{"ruleId":"101","severity":1,"message":"120","line":72,"column":33,"nodeType":"103","messageId":"104","endLine":72,"endColumn":41},{"ruleId":"101","severity":1,"message":"121","line":73,"column":33,"nodeType":"103","messageId":"104","endLine":73,"endColumn":44},{"ruleId":"101","severity":1,"message":"122","line":74,"column":37,"nodeType":"103","messageId":"104","endLine":74,"endColumn":52},{"ruleId":"123","severity":1,"message":"124","line":107,"column":13,"nodeType":"125","messageId":"126","endLine":107,"endColumn":21},{"ruleId":"101","severity":1,"message":"127","line":2,"column":10,"nodeType":"103","messageId":"104","endLine":2,"endColumn":29},{"ruleId":"101","severity":1,"message":"116","line":2,"column":31,"nodeType":"103","messageId":"104","endLine":2,"endColumn":52},{"ruleId":"101","severity":1,"message":"106","line":3,"column":10,"nodeType":"103","messageId":"104","endLine":3,"endColumn":18},{"ruleId":"101","severity":1,"message":"128","line":7,"column":7,"nodeType":"103","messageId":"104","endLine":7,"endColumn":19},"no-native-reassign",["129"],"no-negated-in-lhs",["130"],"no-unused-vars","'Header' is defined but never used.","Identifier","unusedVar","'Footer' is defined but never used.","'useQuery' is defined but never used.","'isLogged' is assigned a value but never used.","'error' is assigned a value but never used.","'data' is assigned a value but never used.","'allLoading' is assigned a value but never used.","'loading' is assigned a value but never used.","'setGraphKey' is assigned a value but never used.","'Link' is defined but never used.","'Component' is defined but never used.","'useEffect' is defined but never used.","'QUERY_PERSONS_NAME_ID' is defined but never used.","'Auth' is defined but never used.","'allData' is assigned a value but never used.","'currentLoading' is assigned a value but never used.","'addError' is assigned a value but never used.","'updateError' is assigned a value but never used.","'updateRelsError' is assigned a value but never used.","no-dupe-keys","Duplicate key 'birthday'.","ObjectExpression","unexpected","'QUERY_SINGLE_PERSON' is defined but never used.","'WithPromises' is defined but never used.","no-global-assign","no-unsafe-negation"]